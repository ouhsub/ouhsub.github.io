<div class="chapter-item">
  <a name="流程控制"></a>
  <h2 class="chapter-title">流程控制</h2>
  <article>
    <p>
      如果要匹配条件表达式，控制就很有用了。
      为了与css的天性保持一致，Less选择支持guarded mixin而不是if/else声明。
      in the vein of @media query feature specifications。
    </p>
    <pre><code class="language-less">.mixin (@a) when (lightness(@a) >= 50%) {
  background-color: black;
}
.mixin (@a) when (lightness(@a) < 50%) {
  background-color: white;
}
.mixin (@a) {
  color: @a;
}
//引入一个控制块的关键就是when关键词
.class1 { .mixin(#ddd) }
.class2 { .mixin(#555) }</code></pre>编译为: <pre><code class="language-css">.class1 {
  background-color: black;
  color: #ddd;
}
.class2 {
  background-color: white;
  color: #555;
}</code></pre>
    <ol>
      <li>
        <h3>比较控制</h3>
        <p>
          比较操作控制有： >, >=, =, =<, <.
          此外，true关键字是唯一的真值，
          这两种表达是一样的:
        </p>
        <pre><code class="language-less">.truth (@a) when (@a) { ... }
.truth (@a) when (@a = true) { ... }
//其余任何值都是假的
.class {
  .truth(40); // Will not match any of the above definitions.
}
//注意了，也可以比较参数，或者无参的情况：
@media: mobile;
.mixin (@a) when (@media = mobile) { ... }
.mixin (@a) when (@media = desktop) { ... }

.max (@a; @b) when (@a > @b) { width: @a }
.max (@a; @b) when (@a < @b) { width: @b }</code></pre>
      </li>
      <li>
        <h3>逻辑控制</h3>
        <p>
          逻辑控制，语法是基于css媒体查询的。
        </p>
        <ul>
          <li>
            使用and关键字，组合控制(逻辑与)
            <pre><code class="language-less">.mixin (@a) when (isnumber(@a)) and (@a > 0) { ... }</code></pre>
          </li>
          <li>
            使用not关键字表示逻辑非
            <pre><code class="language-less">.mixin (@b) when not (@b > 0) { ... }</code></pre>
          </li>
          <li>
            可以使用or关键字或逗号，表示逻辑或
            <pre><code class="language-less">.mixin (@a) when (@a > 10), (@a < -10) { ... }</code></pre>
          </li>
        </ul>
      </li>
      <li>
        <h3>条件混入</h3>
        <p>
          default函数可用于创建条件混入，类似于else或default声明
        </p>
        <pre><code class="language-less">.mixin (@a) when (@a > 0) { ...  }
.mixin (@a) when (default()) { ... }
// matches only if first mixin does not, i.e.when @a <= 0</code></pre>
      </li>
      <li>
        <h3>CSS控制</h3>
        <p>
          流程控制也可以用在css选择器上，其实就是一种声明并立即调用一个mixin的语法糖，类似js匿名函数
        </p>
        <pre><code class="language-less">//1.5之前的版本需要这样做
.my-optional-style() when (@my-option = true) {
  button {
    color: white;
  }
}
.my-optional-style();
//现在就可以这样了：
button when (@my-option = true) {
  color: white;
}

//还可以将这个与&amp;混合使用，以组织多个流程控制。
&amp; when (@my-option = true) {
  button {
    color: white;
  }
  a {
    color: blue;
  }
}</code></pre>
      </li>
      <li>
        <h3>循环</h3>
        <p>
          Less中一个mixin可以调用自身，递归函数，结合条件表达式和模式匹配可以创建循环结构
        </p>
        <pre><code class="language-less">.loop(@counter) when (@counter > 0) {
  .loop((@counter - 1));    // next iteration
  width: (10px * @counter); // code for each iteration
}

div {
  .loop(5); // launch the loop
}</code></pre>编译为: <pre><code class="language-css">div {
  width: 10px;
  width: 20px;
  width: 30px;
  width: 40px;
  width: 50px;
}</code></pre>使用递归循环的一个例子是用css生成柵格系统: <pre><code class="language-less">.generate-columns(4);

.generate-columns(@n, @i: 1) when (@i =< @n) {
  .column-@{i} {
    width: (@i * 100% / @n);
  }
  .generate-columns(@n, (@i + 1));
}</code></pre>编译为: <pre><code class="language-css">.column-1 {
  width: 25%;
}
.column-2 {
  width: 50%;
}
.column-3 {
  width: 75%;
}
.column-4 {
  width: 100%;
}</code></pre>
      </li>
    </ol>
  </article>
</div>
