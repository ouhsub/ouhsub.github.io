---
layout: blog
title: Jekyll详解
categories: blogs basic
excerpt: Jekyll是一个静态站点生成器，我是在搭建Github Pages博客的时候开始接触它，还挺好用。使用方法非常简单，这里详细介绍一下。
tags: Jekyll Liquid YAML
chapters: [配置安装, 命令, 目录结构, 配置, 头信息, 草稿, 变量, 数据文件, assets, 模板, 永久链接, 插件, 分页]
published: true
script: prism.default.basic
style: prism.default.basic
---

{% include blog_head.html %}
<hr>
<div class="blog-body">
  <div class="chapter-item">
    <a name="配置安装"></a>
    <h2 class="chapter-title">配置安装</h2>
    <article>
      <p>
        Jekyll的运行依赖于Ruby，需要先搭建Ruby的运行环境。
      </p>
      <p>
        Jekyll的最好安装方式是通过RubyGem:
        <code class="language-bash">
          $ gem install jekyll
        </code>
      </p>
    </article>
  </div>
  <div class="chapter-item">
    <a name="命令"></a>
    <h2 class="chapter-title">命令</h2>
    <article>
      Jekyll的命令有：
      <pre><code class="language-bash"># build
$ jekyll build
# 当前文件夹中的内容将会生成到 ./site 文件夹中。

$ jekyll build --destination <destination>
# 当前文件夹中的内容将会生成到目标文件夹<destination>中。

$ jekyll build --source <source> --destination <destination>
# 指定源文件夹<source>中的内容将会生成到目标文件夹<destination>中。

$ jekyll build --watch
# 当前文件夹中的内容将会生成到 ./site 文件夹中，
# 查看改变，并且自动再生成。

# server
$ jekyll serve
# 一个开发服务器将会运行在 http://localhost:4000/
# 已经开启了查看更新并自动再生成. 用`--no-watch`参数可以禁用

$ jekyll serve --detach
# 功能和`jekyll serve`命令相同，但是会脱离终端在后台运行。

$ jekyll serve --no-watch
# 和`jekyll serve`相同，但是不会查看变更并且自动再生成。</code></pre>
      很多<a href="#配置">配置选项</a>既可以在命令行中作为标识(flags)设定，
      也可以在源文件根目录中的 _config.yml 文件中进行设定。
      Jekyll 会自动加载这些配置。
    </article>
  </div>
  <div class="chapter-item">
    <a name="目录结构"></a>
    <h2 class="chapter-title">目录结构</h2>
    <article>
      基本的Jekyll网站的目录结构:
      <ul class="dir-container">
        <li>_config.yml</li>
        <li>_drafts/</li>
        <li>_includes/</li>
        <li>_layouts/</li>
        <li>_posts/</li>
        <li>_data/</li>
        <li>_site</li>
        <li>.jekyll-metadata</li>
        <li>assets</li>
        <li>index.html</li>
      </ul>
      各文件、目录作用:
      <ol>
        <li>
          _config.yml
          <p>
            保存配置数据。很多<a href="#配置">配置选项</a>都会直接从命令行中进行设置，
            但是也可以把那些配置写在这儿。
          </p>
        </li>
        <li>
          _drafts
          <p>
            保存未发布的文章。这些文件的格式中都没有 title.MARKUP 数据。
          </p>
        </li>
        <li>
          _includes
          <p>
            保存网页部件。
            可以加载这些包含部分到你的布局或者文章中以方便重用。
            可以用这个tag标记 {% raw %}{% include file.ext %}{% endraw %} 执行include命令，
            来把文件 _includes/file.ext 包含到页面上。
          </p>
        </li>
        <li>
          _layouts
          <p>
            保存网页模板。
            布局可以在 YAML头信息中根据不同文章进行选择。
            output标记 {% raw %}{{ content }}{% endraw %} 则用来为文章内容在模板中占位。
          </p>
        </li>
        <li>
          _posts
          <p>
            保存文章。
            文件名的格式很重要，必须要符合: YEAR-MONTH-DAY-title.MARKUP。
            文章的默认URL是根据文件名生成的，
            但是也可以在配置文件或文章YAML头信息中设置<a href="#永久链接">永久链接(permalinks)</a>，
            为文章指定URL。
          </p>
        </li>
        <li>
          _data
          <p>
            保存格式化的站点数据。
            Jekyll引擎将自动加载这个文件夹中所有YAML文件(.yml, .yaml, .json, .csv)，
            通过`site.data`就可以访问这些数据。例如可以通过{% raw %}{{ site.data.members }}{% endraw %}
            访问文件/_data/members.yml的内容。
          </p>
        </li>
        <li>
          _site
          <p>
            保存转换完成的静态文件。
          </p>
        </li>
        <li>
          index.html(以及其他的HTML, Markdown, Textile文件)
          <p>
            如果这些文件中包含<strong>YAML头信息</strong>部分，Jekyll就会自动将它们进行转换。
            而其他的.html，.markdown，.md或者.textile等根目录下或者自定义目录中的文件也会被转换。
          </p>
        </li>
        <li>
          其他文件/文件夹
          <p>
            其他一些未被提及的目录和文件如assets文件夹，favicon.ico等文件
            都将被完全拷贝到生成的_site中。
          </p>
        </li>
        <li>
          .jekyll-metadata
          <p>
            这个文件用来帮助Jekyll跟踪文件变动，标记哪些文件需要重新生成，哪些没有被修改过。
            这个文件不会被渲染，所以可以加入.gitignore忽略列表。
          </p>
        </li>
      </ol>
    </article>
  </div>
  <div class="chapter-item">
    <a name="配置"></a>
    <h2 class="chapter-title">配置</h2>
    <article>
      <ol>
        <li>
          <h3>配置设置</h3>
          <span style="border-bottom: 2px solid #666">全局配置</span>
          <ul>
            <li>
              <p>
                <strong>Site Source</strong>  (改变 Jekyll 读取文件的目录) <br>
                配置项 <code class="language-yaml">source: DIR</code> <br>
                命令行参数 <code class="language-bash">-s, --source DIR</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Site Destination</strong>  (改变 Jekyll 写入文件的目录) <br>
                配置项 <code class="language-yaml">destination: DIR</code> <br>
                命令行参数 <code class="language-bash">-d, --destination DIR</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Safe</strong>  (禁用 自定义插件) <br>
                配置项 <code class="language-yaml">safe: BOOL</code> <br>
                命令行参数 <code class="language-bash">--safe</code>
              </p>
            </li>
            </li>
            <li>
              <p>
                <strong>Keep files</strong>  (当清除site写入文件的目录时，保存选中的文件。
                对于非Jekyll生成的文件比较有用。路径是相对于写入文件的目录的。) <br>
                配置项 <code class="language-yaml">keep_files: [DIR, FILE, ...]</code> <br>
              </p>
            </li>
            <li>
              <p>
                <strong>Exclude</strong>  (转换时排除某些文件夹或文件。被排除的文件或文件夹的路径是相对于网站源码目录的，源码目录以外不受影响) <br>
                配置项 <code class="language-yaml">exclude: [DIR, FILE, ...]</code> <br>
              </p>
            </li>
            <li>
              <p>
                <strong>Include</strong>  (转换时强制包含某些文件、文件夹。.htaccess是个典型的例子，因为默认排除 .(dot)开头的文件) <br>
                配置项 <code class="language-yaml">include: [DIR, FILE, ...]</code> <br>
              </p>
            </li>
            <li>
              <p>
                <strong>Time Zone</strong>  (设置时区，默认值为操作系统的时区) <br>
                配置项 <code class="language-yaml">timezone: TIMEZONE</code> <br>
              </p>
            </li>
            <li>
              <p>
                <strong>Encoding</strong>  (设置文件的编码) <br>
                配置项 <code class="language-yaml">encoding: ENCODING</code> <br>
              </p>
            </li>
          </ul>
          <span style="border-bottom: 2px solid #666">build命令参数/选项</span>
          <ul>
            <li>
              <p>
                <strong>Regeneration</strong>  (允许文件修改时自动重新生成网站) <br>
                命令行参数 <code class="language-bash">-w, --watch</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Configuration</strong>  (手动设置配置文件并替代_config.yml，可设置多个，且后边的设置会覆盖前边的) <br>
                命令行参数 <code class="language-bash">--config FILE1[,FILE2,...]</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Drafts</strong>  (处理草稿) <br>
                配置项 <code class="language-yaml">show_drafts: BOOL</code> <br>
                命令行参数 <code class="language-bash">--drafts</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Future</strong>  (用将来的日期发布文章) <br>
                配置项 <code class="language-yaml">future: BOOL</code> <br>
                命令行参数 <code class="language-bash">--future</code>
              </p>
            </li>
            <li>
              <p>
                <strong>LSI</strong>  (为相关文章生成索引) <br>
                配置项 <code class="language-yaml">lsi: BOOL</code> <br>
                命令行参数 <code class="language-bash">--lsi</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Limit Posts</strong>  (限制文章的数量) <br>
                配置项 <code class="language-yaml">limit_posts: NUM</code> <br>
                命令行参数 <code class="language-bash">--limit_posts NUM</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Environment</strong>  (使用特定环境值进行编译) <br>
                命令行参数 <code class="language-bash">JEKYLL_ENV=production</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Force polling</strong>  (强制使用轮询watch) <br>
                命令行参数 <code class="language-bash">--force_polling</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Verbose output</strong>  (冗值输出) <br>
                命令行参数 <code class="language-bash">-V, --verbose</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Silence Output</strong>  (静默输出) <br>
                命令行参数 <code class="language-bash">-q, --quiet</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Incremental build</strong>  (开启实验性的渐进编译特性。
                渐进编译只重新编译那些有改变的页面和文章，这可以使大型站点的性能得到大大提升。
                但是也可能会破坏当前的站点实例) <br>
                配置项 <code class="language-yaml">incremental: BOOL</code> <br>
                命令行参数 <code class="language-bash">-I, --incremental</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Liquid profiler</strong>  (Generate a Liquid rendering profile
                to help you identify performance bottlenecks) <br>
                配置项 <code class="language-yaml">profile: BOOL</code> <br>
                命令行参数 <code class="language-bash">--profile</code>
              </p>
            </li>
          </ul>
          <span style="border-bottom: 2px solid #666">server命令参数/选项</span><br>
          Jekyll运行server命令前是需要在后台先运行build命令的，
          所以build命令的参数或选项都可以用在server命令下。此外，server还支持以下参数/选项
          <ul>
            <li>
              <p>
                <strong>Local Server Port</strong>  (监听所给的端口) <br>
                配置项 <code class="language-yaml">port: PORT</code> <br>
                命令行参数 <code class="language-bash">--port PORT</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Local Server Hostname</strong>  (监听所给的主机名) <br>
                配置项 <code class="language-yaml">host: HOSTNAME</code> <br>
                命令行参数 <code class="language-bash">--host HOSTNAME</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Base URL</strong>  (网站的根路径) <br>
                配置项 <code class="language-yaml">baseurl: URL</code> <br>
                命令行参数 <code class="language-bash">--baseurl URL</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Detach</strong>  (从终端命令行中分离出来) <br>
                配置项 <code class="language-yaml">detach: BOOL</code> <br>
                命令行参数 <code class="language-bash">-B, --detach</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Skips the initial site build</strong>  (跳过server命令之前的编译) <br>
                命令行参数 <code class="language-bash">--skip-initial-build</code>
              </p>
            </li>
            <li>
              <p>
                <strong>X.509 (SSL) Private Key</strong>  (SSL密钥) <br>
                命令行参数 <code class="language-bash">--ssl-key</code>
              </p>
            </li>
            <li>
              <p>
                <strong>X.509 (SSL) Certificate</strong>  (SSL公共证书) <br>
                命令行参数 <code class="language-bash">--ssl-cert</code>
              </p>
            </li>
          </ul>
        </li>
        <li>
          <h3>默认配置</h3>
          <pre><code class="language-yaml"># Where things are
source:       .
destination:  ./_site
plugins_dir:  _plugins
layouts_dir:  _layouts
data_dir:     _data
includes_dir: _includes
collections:
  posts:
    output:   true

# Handling Reading
safe:         false
include:      [".htaccess"]
exclude:>
 ["node_modules", "vendor/bundle/",
 "vendor/cache/", "vendor/gems/", "vendor/ruby/"]
keep_files:   [".git", ".svn"]
encoding:     "utf-8"
markdown_ext: "markdown,mkdown,mkdn,mkd,md"

# Filtering Content
show_drafts: null
limit_posts: 0
future:      false
unpublished: false

# Plugins
whitelist: []
gems:      []

# Conversion
markdown:    kramdown
highlighter: rouge
lsi:         false
excerpt_separator: "\n\n"
incremental: false

# Serving
detach:  false
port:    4000
host:    127.0.0.1
baseurl: "" # does not include hostname
show_dir_listing: false

# Outputting
permalink:     date
paginate_path: /page:num
timezone:      null

quiet:    false
verbose:  false
defaults: []

liquid:
  error_mode: warn

# Markdown Processors
rdiscount:
  extensions: []

redcarpet:
  extensions: []

kramdown:
  auto_ids:       true
  footnote_nr:    1
  entity_output:  as_char
  toc_levels:     1..6
  smart_quotes:   lsquo,rsquo,ldquo,rdquo
  input:          GFM
  hard_wrap:      false
  footnote_nr:    1</code></pre>
        </li>
        <li>
          <h3>Markdown选项</h3>

        </li>
      </ol>
    </article>
  </div>
  <div class="chapter-item">
    <a name="头信息"></a>
    <h2 class="chapter-title">头信息</h2>
    <article>

    </article>
  </div>
</div>
<hr>
<div class="blog-foot">

</div>
