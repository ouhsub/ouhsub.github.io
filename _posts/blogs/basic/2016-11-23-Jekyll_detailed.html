---
layout: blog
title: Jekyll详解
categories: blogs basic
excerpt: Jekyll是一个静态站点生成器，我是在搭建Github Pages博客的时候开始接触它，还挺好用。使用方法非常简单，这里详细介绍一下。
tags: Jekyll Liquid YAML
chapters: [配置安装, 命令, 目录结构, 配置, 头信息, 写文章, 变量, 数据文件, 模板, 永久链接, 插件, 分页]
published: true
script: prism.default.basic
style: prism.default.basic
---

{% include blog_head.html %}
<hr>
<div class="blog-body">
  <div class="chapter-item">
    <a name="配置安装"></a>
    <h2 class="chapter-title">配置安装</h2>
    <article>
      <p>
        Jekyll的运行依赖于Ruby，需要先搭建Ruby的运行环境。
      </p>
      <p>
        Jekyll的最好安装方式是通过RubyGem:
        <code class="language-bash">
          $ gem install jekyll
        </code>
      </p>
    </article>
  </div>
  <div class="chapter-item">
    <a name="命令"></a>
    <h2 class="chapter-title">命令</h2>
    <article>
      Jekyll的命令有：
      <pre><code class="language-bash"># build
$ jekyll build
# 当前文件夹中的内容将会生成到 ./site 文件夹中。

$ jekyll build --destination <destination>
# 当前文件夹中的内容将会生成到目标文件夹<destination>中。

$ jekyll build --source <source> --destination <destination>
# 指定源文件夹<source>中的内容将会生成到目标文件夹<destination>中。

$ jekyll build --watch
# 当前文件夹中的内容将会生成到 ./site 文件夹中，
# 查看改变，并且自动再生成。

# server
$ jekyll serve
# 一个开发服务器将会运行在 http://localhost:4000/
# 已经开启了查看更新并自动再生成. 用`--no-watch`参数可以禁用

$ jekyll serve --detach
# 功能和`jekyll serve`命令相同，但是会脱离终端在后台运行。

$ jekyll serve --no-watch
# 和`jekyll serve`相同，但是不会查看变更并且自动再生成。</code></pre>
      很多<a href="#配置">配置选项</a>既可以在命令行中作为标识(flags)设定，
      也可以在源文件根目录中的 _config.yml 文件中进行设定。
      Jekyll 会自动加载这些配置。
    </article>
  </div>
  <div class="chapter-item">
    <a name="目录结构"></a>
    <h2 class="chapter-title">目录结构</h2>
    <article>
      基本的Jekyll网站的目录结构:
      <ul class="dir-container">
        <li>_config.yml</li>
        <li>_drafts/</li>
        <li>_includes/</li>
        <li>_layouts/</li>
        <li>_posts/</li>
        <li>_data/</li>
        <li>_site</li>
        <li>.jekyll-metadata</li>
        <li>assets</li>
        <li>index.html</li>
      </ul>
      各文件、目录作用:
      <ol>
        <li>
          _config.yml
          <p>
            保存配置数据。很多<a href="#配置">配置选项</a>都会直接从命令行中进行设置，
            但是也可以把那些配置写在这儿。
          </p>
        </li>
        <li>
          _drafts
          <p>
            保存未发布的文章。这些文件的格式中都没有 title.MARKUP 数据。
          </p>
        </li>
        <li>
          _includes
          <p>
            保存网页部件。
            可以加载这些包含部分到你的布局或者文章中以方便重用。
            可以用这个tag标记 {% raw %}{% include file.ext %}{% endraw %} 执行include命令，
            来把文件 _includes/file.ext 包含到页面上。
          </p>
        </li>
        <li>
          _layouts
          <p>
            保存网页模板。
            布局可以在 YAML头信息中根据不同文章进行选择。
            output标记 {% raw %}{{ content }}{% endraw %} 则用来为文章内容在模板中占位。
          </p>
        </li>
        <li>
          _posts
          <p>
            保存文章。
            文件名的格式很重要，必须要符合: YEAR-MONTH-DAY-title.MARKUP。
            文章的默认URL是根据文件名生成的，
            但是也可以在配置文件或文章YAML头信息中设置<a href="#永久链接">永久链接(permalinks)</a>，
            为文章指定URL。
          </p>
        </li>
        <li>
          _data
          <p>
            保存格式化的站点数据。
            Jekyll引擎将自动加载这个文件夹中所有YAML文件(.yml, .yaml, .json, .csv)，
            通过`site.data`就可以访问这些数据。例如可以通过{% raw %}{{ site.data.members }}{% endraw %}
            访问文件/_data/members.yml的内容。
          </p>
        </li>
        <li>
          _site
          <p>
            保存转换完成的静态文件。
          </p>
        </li>
        <li>
          index.html(以及其他的HTML, Markdown, Textile文件)
          <p>
            如果这些文件中包含<strong>YAML头信息</strong>部分，Jekyll就会自动将它们进行转换。
            而其他的.html，.markdown，.md或者.textile等根目录下或者自定义目录中的文件也会被转换。
          </p>
        </li>
        <li>
          其他文件/文件夹
          <p>
            其他一些未被提及的目录和文件如assets文件夹，favicon.ico等文件
            都将被完全拷贝到生成的_site中。
          </p>
        </li>
        <li>
          .jekyll-metadata
          <p>
            这个文件用来帮助Jekyll跟踪文件变动，标记哪些文件需要重新生成，哪些没有被修改过。
            这个文件不会被渲染，所以可以加入.gitignore忽略列表。
          </p>
        </li>
      </ol>
    </article>
  </div>
  <div class="chapter-item">
    <a name="配置"></a>
    <h2 class="chapter-title">配置</h2>
    <article>
      <ol>
        <li>
          <h3>配置设置</h3>
          <span style="border-bottom: 2px solid #666">全局配置</span>
          <ul>
            <li>
              <p>
                <strong>Site Source</strong>  (改变 Jekyll 读取文件的目录) <br>
                配置项 <code class="language-yaml">source: DIR</code> <br>
                命令行参数 <code class="language-bash">-s, --source DIR</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Site Destination</strong>  (改变 Jekyll 写入文件的目录) <br>
                配置项 <code class="language-yaml">destination: DIR</code> <br>
                命令行参数 <code class="language-bash">-d, --destination DIR</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Safe</strong>  (禁用 自定义插件) <br>
                配置项 <code class="language-yaml">safe: BOOL</code> <br>
                命令行参数 <code class="language-bash">--safe</code>
              </p>
            </li>
            </li>
            <li>
              <p>
                <strong>Keep files</strong>  (当清除site写入文件的目录时，保存选中的文件。
                对于非Jekyll生成的文件比较有用。路径是相对于写入文件的目录的。) <br>
                配置项 <code class="language-yaml">keep_files: [DIR, FILE, ...]</code> <br>
              </p>
            </li>
            <li>
              <p>
                <strong>Exclude</strong>  (转换时排除某些文件夹或文件。被排除的文件或文件夹的路径是相对于网站源码目录的，源码目录以外不受影响) <br>
                配置项 <code class="language-yaml">exclude: [DIR, FILE, ...]</code> <br>
              </p>
            </li>
            <li>
              <p>
                <strong>Include</strong>  (转换时强制包含某些文件、文件夹。.htaccess是个典型的例子，因为默认排除 .(dot)开头的文件) <br>
                配置项 <code class="language-yaml">include: [DIR, FILE, ...]</code> <br>
              </p>
            </li>
            <li>
              <p>
                <strong>Time Zone</strong>  (设置时区，默认值为操作系统的时区) <br>
                配置项 <code class="language-yaml">timezone: TIMEZONE</code> <br>
              </p>
            </li>
            <li>
              <p>
                <strong>Encoding</strong>  (设置文件的编码) <br>
                配置项 <code class="language-yaml">encoding: ENCODING</code> <br>
              </p>
            </li>
          </ul>
          <span style="border-bottom: 2px solid #666">build命令参数/选项</span>
          <ul>
            <li>
              <p>
                <strong>Regeneration</strong>  (允许文件修改时自动重新生成网站) <br>
                命令行参数 <code class="language-bash">-w, --watch</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Configuration</strong>  (手动设置配置文件并替代_config.yml，可设置多个，且后边的设置会覆盖前边的) <br>
                命令行参数 <code class="language-bash">--config FILE1[,FILE2,...]</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Drafts</strong>  (处理草稿) <br>
                配置项 <code class="language-yaml">show_drafts: BOOL</code> <br>
                命令行参数 <code class="language-bash">--drafts</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Future</strong>  (用将来的日期发布文章) <br>
                配置项 <code class="language-yaml">future: BOOL</code> <br>
                命令行参数 <code class="language-bash">--future</code>
              </p>
            </li>
            <li>
              <p>
                <strong>LSI</strong>  (为相关文章生成索引) <br>
                配置项 <code class="language-yaml">lsi: BOOL</code> <br>
                命令行参数 <code class="language-bash">--lsi</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Limit Posts</strong>  (限制文章的数量) <br>
                配置项 <code class="language-yaml">limit_posts: NUM</code> <br>
                命令行参数 <code class="language-bash">--limit_posts NUM</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Environment</strong>  (使用特定环境值进行编译) <br>
                命令行参数 <code class="language-bash">JEKYLL_ENV=production</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Force polling</strong>  (强制使用轮询watch) <br>
                命令行参数 <code class="language-bash">--force_polling</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Verbose output</strong>  (冗值输出) <br>
                命令行参数 <code class="language-bash">-V, --verbose</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Silence Output</strong>  (静默输出) <br>
                命令行参数 <code class="language-bash">-q, --quiet</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Incremental build</strong>  (开启实验性的渐进编译特性。
                渐进编译只重新编译那些有改变的页面和文章，这可以使大型站点的性能得到大大提升。
                但是也可能会破坏当前的站点实例) <br>
                配置项 <code class="language-yaml">incremental: BOOL</code> <br>
                命令行参数 <code class="language-bash">-I, --incremental</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Liquid profiler</strong>  (Generate a Liquid rendering profile
                to help you identify performance bottlenecks) <br>
                配置项 <code class="language-yaml">profile: BOOL</code> <br>
                命令行参数 <code class="language-bash">--profile</code>
              </p>
            </li>
          </ul>
          <span style="border-bottom: 2px solid #666">server命令参数/选项</span><br>
          Jekyll运行server命令前是需要在后台先运行build命令的，
          所以build命令的参数或选项都可以用在server命令下。此外，server还支持以下参数/选项
          <ul>
            <li>
              <p>
                <strong>Local Server Port</strong>  (监听所给的端口) <br>
                配置项 <code class="language-yaml">port: PORT</code> <br>
                命令行参数 <code class="language-bash">--port PORT</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Local Server Hostname</strong>  (监听所给的主机名) <br>
                配置项 <code class="language-yaml">host: HOSTNAME</code> <br>
                命令行参数 <code class="language-bash">--host HOSTNAME</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Base URL</strong>  (网站的根路径) <br>
                配置项 <code class="language-yaml">baseurl: URL</code> <br>
                命令行参数 <code class="language-bash">--baseurl URL</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Detach</strong>  (从终端命令行中分离出来) <br>
                配置项 <code class="language-yaml">detach: BOOL</code> <br>
                命令行参数 <code class="language-bash">-B, --detach</code>
              </p>
            </li>
            <li>
              <p>
                <strong>Skips the initial site build</strong>  (跳过server命令之前的编译) <br>
                命令行参数 <code class="language-bash">--skip-initial-build</code>
              </p>
            </li>
            <li>
              <p>
                <strong>X.509 (SSL) Private Key</strong>  (SSL密钥) <br>
                命令行参数 <code class="language-bash">--ssl-key</code>
              </p>
            </li>
            <li>
              <p>
                <strong>X.509 (SSL) Certificate</strong>  (SSL公共证书) <br>
                命令行参数 <code class="language-bash">--ssl-cert</code>
              </p>
            </li>
          </ul>
        </li>
        <li>
          <h3>默认配置</h3>
          <pre><code class="language-yaml"># Where things are
source:       .
destination:  ./_site
plugins_dir:  _plugins
layouts_dir:  _layouts
data_dir:     _data
includes_dir: _includes
collections:
  posts:
    output:   true

# Handling Reading
safe:         false
include:      [".htaccess"]
exclude:>
 ["node_modules", "vendor/bundle/",
 "vendor/cache/", "vendor/gems/", "vendor/ruby/"]
keep_files:   [".git", ".svn"]
encoding:     "utf-8"
markdown_ext: "markdown,mkdown,mkdn,mkd,md"

# Filtering Content
show_drafts: null
limit_posts: 0
future:      false
unpublished: false

# Plugins
whitelist: []
gems:      []

# Conversion
markdown:    kramdown
highlighter: rouge
lsi:         false
excerpt_separator: "\n\n"
incremental: false

# Serving
detach:  false
port:    4000
host:    127.0.0.1
baseurl: "" # does not include hostname
show_dir_listing: false

# Outputting
permalink:     date
paginate_path: /page:num
timezone:      null

quiet:    false
verbose:  false
defaults: []

liquid:
  error_mode: warn

# Markdown Processors
rdiscount:
  extensions: []

redcarpet:
  extensions: []

kramdown:
  auto_ids:       true
  footnote_nr:    1
  entity_output:  as_char
  toc_levels:     1..6
  smart_quotes:   lsquo,rsquo,ldquo,rdquo
  input:          GFM
  hard_wrap:      false
  footnote_nr:    1</code></pre>
        </li>
        <li>
          <h3>Markdown选项</h3>
        </li>
      </ol>
    </article>
  </div>
  <div class="chapter-item">
    <a name="头信息"></a>
    <h2 class="chapter-title">头信息</h2>
    <article>
      <p>
        任何只要包含YAML头信息的文件在Jekyll中都能被当做一个特殊的文件来处理。
        头信息必须在文件的开始部分，并且需要按照 YAML 的格式写在两行三虚线之间。
        在这两行的三虚线之间，可以设置一些预定义的变量或者自定义的变量。
        这样在接下来的文件和任意模板中或者在包含这些页面或博客的模板中都
        可以通过使用Liquid标签来访问这些变量。
      </p>
      <ol>
        <li>
          预定义全局变量
          <p>
            <strong>layout</strong><br>
            用于指定模板文件，不需要扩展名。模板文件需要放在 _layouts 目录下。
          </p>
          <p>
            <strong>permalink</strong><br>
            博客默认的URL地址为/year/month/day/title.html，
            这个变量用于改变博客的默认URL，设置变量后，成为最终的URL地址。
          </p>
          <p>
            <strong>published</strong><br>
            当站点生成的时候，如果不需要展示一个具体的博文，可以设置这个变量为 false。
          </p>
        </li>
        <li>
          预定义文章变量
          <p>
            <strong>category/categories</strong><br>
            除过将博客文章放在某个文件夹下面外，还可以根据文章的类别来给他们设置一个或者多个分类属性。
            博客生成的时候这些文章就可以根据这些分类来阅读。
            在一个文章中多个类别可以通过YAML list来指定，或者用空格隔开。
          </p>
          <p>
            <strong>tags</strong><br>
            类似分类，一篇文章也可以给它增加一个或者多个标签。
            同样多个标签之间可以通过YAML list或者空格隔开。
          </p>
          <p>
            <strong>date</strong><br>
            这里的日期会覆盖文章名字中的日期。这样就可以用来确定文章分类的正确。
            格式(YYYY-MM-DD HH:MM:SS +/-TTTT)其中小时，分钟，秒钟与时区偏移量是可选的。
          </p>
        </li>
        <li>
          自定义变量
          <p>在头信息中没有预先定义的任何变量都会在数据转换中通过Liquid模板被调用</p>
        </li>
      </ol>
    </article>
  </div>
  <div class="chapter-item">
    <a name="写文章"></a>
    <h2 class="chapter-title">写文章</h2>
    <article>
      <ol>
        <li>
          创建文章
          <p>
            在_posts文件夹下创建以格式YEAR-MONTH-DAY-title.MARKUP命名的文件即可。
            所有博客文章顶部必须有一段YAML头信息。在它下面，就可以选择喜欢的格式来写文章了。
          </p>
        </li>
        <li>
          引用静态资源
          <p>
            需要在文章中引用图片、下载或其它静态文件资源的时候，
            只需要关心在站点的哪些地方保存这些文件就可以咯。<br>
            一种常用做法是在工程的根目录下创建一个文件夹(assets)，将静态资源放到这个文件夹下。
            然后在任何一篇文章中，它们都可以用站点的根目录来进行引用。
            这和你站点的域名/二级域名和目录的设置相关，可以利用site.url变量来解决这个问题。<br>
            <code class="language-markup">
              &lt;link rel="stylesheet" href="{% raw %}{{ site.url }}{% endraw %}/assets/css/main.css"&gt;
            </code>
          </p>
        </li>
        <li>
          Assets
          <p>
            Jekyll提供了对Sass的内置支持，并且可以通过一个Ruby gem与CoffeeScript协调工作。
            要使用这两种格式的文件，首先必须使用正确的扩展名(.sass, .scss, .coffee)，
            并且每个文件都要以两行三个短横线开始，比如: <pre><code class="language-sass">/* some.sass */
---
---
// start content
.my-definition
  font-size: 1.2em</code></pre>
            Jekyll像对待常规文件一样对待这些文件，输出文件将被放在同一个文件夹。
            比如在source文件夹中有一个css/styles.scss文件，
            Jekyll将会编译它并将它放在destination文件夹下css/styles.css。
          </p>
          <p>
            <strong>Sass/SCSS</strong><sup><a href="#ref_1">1</a></sup><br>
            Jekyll允许定制Sass转换方式。将所有片段/组件放在sass_dir(默认为source/_sass)，
            将主SCSS/Sass文件放在输出文件夹中(如source/css)。
            Sass转换器默认将sass_dir设置为_sass。
            如果要使用Sass的@import声明，需要确保将sass_dir设置于包含着Sass文件的网站根目录，可以这样:
            <pre><code class="language-yaml"># _config.yml
sass:
  sass_dir: _sass</code></pre>
            sass_dir目录只是Sass import操作的加载路径，除此再也没别的了。
            这意味着Jekyll并不直接处理这个文件夹中的文件，所以也就没必要包含YAML头信息了。<br>
            也可以指定Sass文件的编译格式: <pre><code class="language-yaml"># _config.yaml
sass:
  style: compressed</code></pre>可以通过这些设置传递编译参数到Sass。
          </p>
          <p>
            <strong>CoffeeScript</strong><br>
            要想在Jekyll3.0+中使用CoffeeScript，必须下载jekyll-coffeescript的gem包。
            确保更新配置文件，并且包含以下配置:<pre><code class="language-yaml"># _config.yaml
gems:
 - jekyll-coffeescript</code></pre>
          </p>
        </li>
        <li>
          文章索引
          <p>
            使用<a href="https://shopify.github.io/liquid/" target="_blank">Liquid模版语言</a>和它的标记可以轻松地创建文章列表:
            <pre><code class="language-markup">&lt;ul&gt;
  {% raw %}{% for post in site.posts %}{% endraw %}
    &lt;li&gt;
      &lt;a href="{% raw %}{{ post.url }}{% endraw %}"&gt;{% raw %}{{ post.title }}{% endraw %}&lt;/a&gt;
    &lt;/li&gt;
  {% raw %}{% endfor %}{% endraw %}
&lt;/ul&gt;</code></pre>
          </p>
        </li>
        <li>
          文章摘要
          <p>
            Jekyll会自动取每篇文章从开头到第一次出现excerpt_separator的地方作为文章的摘要，
            并将此内容保存到变量post.excerpt中。可以这样输出:
            <pre><code class="language-markup">&lt;ul&gt;
  {% raw %}{% for post in site.posts %}{% endraw %}
    &lt;li&gt;
      &lt;a href="{% raw %}{{ post.url }}{% endraw %}"&gt;{% raw %}{{ post.title }}{% endraw %}&lt;/a&gt;
      {% raw %}{{ post.excerpt }}{% endraw %}
    &lt;/li&gt;
  {% raw %}{% endfor %}{% endraw %}
&lt;/ul&gt;</code></pre>Jekyll会将自动生成的摘要内容包含在段落标签内。可以这样去掉这些p标签: <br>
            <code class="language-markup">{% raw %}{{ post.excerpt | remove: '&lt;p&gt;' | remove: '&lt;/p&gt;' }}{% endraw %}</code>
          </p>
          <p>
            如果不喜欢自动生成的文章摘要，也可以在YAML头信息中显示地定义excerpt变量来覆盖自动生成的摘要。
          </p>
          <p>
            可以在_config.yml配置文件中设定全局的excerpt_separator，
            或者在文章YAML信息头中设定excerpt_separator:
            <pre><code class="language-markup">---
excerpt_separator: &lt;!--more--&gt;
---

Excerpt
&lt;!--more--&gt;
Out-of-excerpt</code></pre>
            要完全禁用摘要，可以将excerpt_separator设定为""。
          </p>
          <p>
            在输出文章摘要的时候可以向output标记传递 | strip_html 过滤器，用来移除所有的HTML标签。
            这在要将摘要输出作为meta元数据的时候是很有用滴。
          </p>
        </li>
        <li>
          代码高亮
          <p>
            Jekyll 自带语法高亮功能，是由 Pygments 来实现的。
            在文章中插入一段高亮代码非常简单，只需使用下面的 Liquid 标记:
            <pre><code class="language-markup">{% raw %}{% highlight ruby %}{% endraw %}
def show
  @widget = Widget(params[:id])
  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @widget }
  end
end
{% raw %}{% endhighlight %}{% endraw %}</code></pre>
          </p>
        </li>
        <li>
          使用草稿
          <p>
            草稿是没有日期的文章。是还在创作中而暂时不想发表的文章。
            所有保存在_drafts/文件夹中的文章都是草稿。<br>
            要预览草稿可以运行<code class="language-bash"> jekyll serve --drafts </code>
            或者在配置文件中设置<code class="language-yaml"> show_drafts: true </code>
            此两种方法皆会将 Time.now 的值赋予草稿文章，作为其发布日期，
            草稿文章作为最新文章被生成。
          </p>
        </li>
        <li>
          静态页面
          <p>
            作为写文章的补充，Jekyll 还可以创建静态页面。
            站点上任何 HTML 文件，包括主页，都可以使用布局和 include 中的内容一般共用的内容，
            如页面的 header 和 footer. 将合适的部分抽出放到布局中。有两种创建静态页面的方式:
            <ul>
              <li>
                命名HTML文件
                <p>
                  增加一个新页面的最简单方法就是把给 HTML 文件起一个适当的名字并放在根目录下。
                  一般来说，一个站点下通常会有：主页 (homepage), 关于 (about), 和一个联系 (contact)页。
                  根目录下的文件结构和对应生成的URL:
                  <ul class="dir-container">
                    <li>index.html    # => https://example.com/</li>
                    <li>about.html    # => https://example.com/about.html</li>
                    <li>contact.html    # => https://example.com/contact.html</li>
                  </ul>
                </p>
              </li>
              <li>
                命名一个文件夹并包含一个index.html文件
                <p>
                  如果不喜欢在 URL 中显示文件的扩展名。
                  只需要为每个顶级页面创建一个文件夹，并包含一个 inex.html 文件:
                  <ul class="dir-container">
                    <li>index.html    # => http://example.com/</li>
                    <li>
                      about
                      <span class="open-trigger">-</span>
                      <ul class="dir-container">index.html    # => https://example.com/about.html</ul>
                    </li>
                    <li>
                      contact
                      <span class="open-trigger">-</span>
                      <ul class="dir-container">index.html    # => https://example.com/contact.html</ul>
                    </li>
                  </ul>
                </p>
              </li>
            </ul>
          </p>
        </li>
      </ol>
    </article>
  </div>
  <div class="chapter-item">
    <a name="变量"></a>
    <h2 class="chapter-title">变量</h2>
    <article>
      Jekyll 会遍历网站搜寻要处理的文件。
      任何有 YAML 头信息的文件都是要处理的对象。
      对于每一个这样的文件，Jekyll都会通过Liquid模板工具来生成一系列的数据。
      <ol>
        <li>
          全局变量
          <p>
            <strong>site</strong><br>
            来自_config.yml文件的全站范围的信息+配置
          </p>
          <p>
            <strong>page</strong><br>
            页面专属的信息+YAML头文件信息。通过YAML头文件自定义的信息都可以在这里被获取。
          </p>
          <p>
            <strong>content</strong><br>
            被layout包裹的那些 Post 或者 Page 渲染生成的内容。
            没有定义在 Post 或者 Page 文件中。
          </p>
          <p>
            <strong>paginator</strong><br>
            每当 paginate 配置选项被设置了的时候，这个变量就可用了。
          </p>
        </li>
        <li>
          全站(site)变量
          <p>
            <strong>site.time</strong><br>
            当前时间。
          </p>
          <p>
            <strong>site.pages</strong><br>
            所有pages的列表。
          </p>
          <p>
            <strong>site.posts</strong><br>
            一个按照时间倒叙的所有 Posts 的列表。
          </p>
          <p>
            <strong>site.related_posts</strong><br>
            如果当前被处理的页面是一个 Post，这个变量就会包含最多10个相关的 Post。
            默认的情况下， 相关性是低质量的，但是能被很快的计算出来。
            如果你需要高相关性，就要消耗更多的时间来计算。
            用jekyll命令带上--lsi选项来计算高相关性的 Post。Github Pages不支持--lsi选项的命令啊。
          </p>
          <p>
            <strong>site.static_files</strong><br>
            所有静态文件的列表，每个文件有三个属性(路径、修改时间、扩展名)
          </p>
          <p>
            <strong>site.html_pages</strong><br>
            site.pages的子集，列出.html结尾的文件。
          </p>
          <p>
            <strong>site.html_files</strong><br>
            site.static_files的子集，列出.html结尾的文件。
          </p>
          <p>
            <strong>site.collections</strong><br>
            所有集合的列表。
          </p>
          <p>
            <strong>site.data</strong><br>
            包含所有从_data目录下的YAML文件载入的数据的列表。
          </p>
          <p>
            <strong>site.documents</strong><br>
            每个集合中的文档的列表
          </p>
          <p>
            <strong>site.categories.CATEGORY</strong><br>
            类目名为CATEGORY的所有文章。
          </p>
          <p>
            <strong>site.tags.TAG</strong><br>
            所有的在 TAG 标签下的文章。
          </p>
          <p>
            <strong>site.[CONFIGURATION_DATA]</strong><br>
            所有的通过命令行和 _config.yml 设置的变量都会存到这个 site 里面。
            举例来说，如果在配置文件中设置了<code class="language-yaml"> url: http://mysite.com </code>，
            那么在Posts和Pages里面，这个变量就被存储在了site.url中。<br>
            Jekyll不会把对_config.yml做的改动放到watch模式，
            所以要重启Jekyll来让对配置文件的改动生效。
          </p>
        </li>
        <li>
          页面(page)变量
          <p>
            任何你自定义的头文件信息都会在page中可用。<br>
            如果在layout中定义了变量，需要通过layout获取。
          </p>
          <p>
            <strong>page.content</strong><br>
            页面内容的源码。
          </p>
          <p>
            <strong>page.title</strong><br>
            页面标题。
          </p>
          <p>
            <strong>page.excerpt</strong><br>
            文章的摘要。
          </p>
          <p>
            <strong>page.url</strong><br>
            文章以斜线打头的相对路径。
          </p>
          <p>
            <strong>page.date</strong><br>
            文章的日期，可以在头文件信息中重写，格式为YYYY-MM-DD HH:MM:SS (assuming UTC)，
            或者YYYY-MM-DD HH:MM:SS +/-TTTT。
          </p>
          <p>
            <strong>page.id</strong><br>
            每篇文章的唯一标识符(在RSS中比较有用)。
          </p>
          <p>
            <strong>page.categories</strong><br>
            文章所属的类目的列表。类目既可以在文章的YAML头信息中定义，
            也可以从文章的所属的目录结构中提取。
            如一个路径为/work/code/_posts/2008-12-24-closures.md的文章，
            它的类目就是['work','code']。
          </p>
          <p>
            <strong>page.tags</strong><br>
            文章所属的所有tags，在YAML头文件信息中定义。
          </p>
          <p>
            <strong>page.path</strong><br>
            一个文章的源文件地址。比如要链接到Github上某文章的源文件。可以在YAML头文件中重写。
          </p>
          <p>
            <strong>page.next</strong><br>
            与当前文章相对的下一篇文章。
          </p>
          <p>
            <strong>page.previous</strong><br>
            与当前文章相对的上一篇文章。
          </p>
        </li>
        <li>
          分页器(Paginator)变量
          <p>
            <strong>paginator.per_page</strong><br>
            每一页posts的数量
          </p>
          <p>
            <strong>paginator.posts</strong><br>
            当前页可用的posts
          </p>
          <p>
            <strong>paginator.total_posts</strong><br>
            posts的总数
          </p>
          <p>
            <strong>paginator.total_pages</strong><br>
            pages的总数
          </p>
          <p>
            <strong>paginator.page</strong><br>
            当前页号
          </p>
          <p>
            <strong>paginator.previous_page</strong><br>
            上一页页号
          </p>
          <p>
            <strong>paginator.previous_page_path</strong><br>
            上一页地址
          </p>
          <p>
            <strong>paginator.next_page</strong><br>
            下一页页号
          </p>
          <p>
            <strong>paginator.next_page_path</strong><br>
            下一页地址
          </p>
        </li>
      </ol>
    </article>
  </div>
  <div class="chapter-item">
    <a name="数据文件"></a>
    <h2 class="chapter-title">数据文件</h2>
    <article>
      <p>
        Jekyll支持从_data文件夹下的YAML文件，JSON文件或CSV文件(必须包含一个首部行)中加载数据。
        这一特性可以避免模板中的重复，并且可以不改变_config.yml文件的情况下改变站点配置。
        插件/主题也可以利用数据文件来设置配置变量。
      </p>
      <ol>
        例子:
        <li>
          成员列表
          <pre><code class="language-yaml">#  _data/members.yml:
- name: Eric Mill
  github: konklone

- name: Parker Moore
  github: parkr

- name: Liu Fengyun
  github: liufengyun</code></pre>
          这些数据可以通过site.data.members获取(文件名决定变量名)。
          然后可以在模板中渲染成员列表数据咯:
          <pre><code class="language-markup">&lt;ul&gt;
{% raw %}{% for member in site.data.members %}{% endraw %}
  &lt;li&gt;
    &lt;a href="https://github.com/{% raw %}{{ member.github }}{% endraw %}"&gt;
      {% raw %}{{ member.name }}{% endraw %}
    &lt;/a&gt;
  &lt;/li&gt;
{% raw %}{% endfor %}{% endraw %}
&lt;/ul&gt;</code></pre>
        </li>
        <li>
          组织机构
          <p>
            数据文件可以放置在_data文件夹下的子文件夹中，每一层的文件夹都会被添加到变量的命名空间。
            这里每个Github组织的信息都分别放在了orgs文件夹下的数据文件中。
          </p>
          <pre><code class="language-yaml">#  _data/orgs/jekyll.yml
username: jekyll
name: Jekyll
members:
  - name: Tom Preston-Werner
    github: mojombo

  - name: Parker Moore
    github: parkr</code></pre>
          <pre><code class="language-yaml">#  _data/orgs/doeorg.yml
username: doeorg
name: Doe Org
members:
  - name: John Doe
    github: jdoe</code></pre>
          这些数据可以通过site.data.orgs获取。
          然后可以在模板中渲染组织列表数据:
          <pre><code class="language-markup">&lt;ul&gt;
{% raw %}{% for org_hash in site.data.orgs %}{% endraw %}
{% raw %}{% assign org = org_hash[1] %}{% endraw %}
  &lt;li&gt;
    &lt;a href="https://github.com/{{ org.username }}"&gt;
      {% raw %}{{ org.name }}{% endraw %}
    &lt;/a&gt;
    ({% raw %}{{ org.members | size }}{% endraw %} members)
  &lt;/li&gt;
{% raw %}{% endfor %}{% endraw %}
&lt;/ul&gt;</code></pre>
        </li>
        <li>
          获取特定作者数据
          <p>
            pages和posts也可以获取一个特定的数据值。
          </p>
          <pre><code class="language-yaml">#  _data/people.yml
dave:
    name: David Smith
    twitter: DavidSilvaSmith</code></pre>
    <pre><code class="language-markup">---
title: sample post
author: dave
---

{% raw %}{% assign author = site.data.people[page.author] %}{% endraw %}
&lt;a rel="author"
  href="https://twitter.com/{% raw %}{{ author.twitter }}{% endraw %}"
  title="{% raw %}{{ author.name }}{% endraw %}"&gt;
    {% raw %}{{ author.name }}{% endraw %}
&lt;/a&gt;
</code></pre>
        </li>
      </ol>
    </article>
  </div>
  <div class="chapter-item">
    <a name="集合"></a>
    <h2 class="chapter-title">集合</h2>
    <article>

    </article>
  </div>
  <div class="chapter-item">
    <a name="模板"></a>
    <h2 class="chapter-title">模板</h2>
    <article>
      Jekyll 使用 Liquid模板语言，支持所有标准的 Liquid 标签 和 过滤器 。
      Jekyll 甚至增加了几个过滤器和标签，方便使用。
      <ol>
        <li>
          过滤器
          <p>
            <code class="language-markup">{% raw %}{{ "/assets/style.css" | relative_url }}{% endraw %}</code><br>
            => /my-baseurl/assets/style.css <br>
            Relative URL
          </p>
          <p>
            <code class="language-markup">{% raw %}{{ site.time | date_to_xmlschema }}{% endraw %}</code><br>
            => 2008-11-17T13:07:54-08:00 <br>
            日期转化为 XML 模式(ISO 8601)
          </p>
          <p>
            <code class="language-markup">{% raw %}{{ site.time | date_to_rfc822 }}{% endraw %}</code><br>
            => Mon, 17 Nov 2008 13:07:54 -0800 <br>
            日期转化为 RFC-822 格式，用于 RSS 订阅
          </p>
          <p>
            <code class="language-markup">{% raw %}{{ site.time | date_to_string }}{% endraw %}</code><br>
            => 17 Nov 2008 <br>
            日期转化为短格式
          </p>
          <p>
            <code class="language-markup">{% raw %}{{ site.time | date_to_long_string }}{% endraw %}</code><br>
            => 17 November 2008 <br>
            日期转化为长格式
          </p>
          <p>
            <code class="language-markup">{% raw %}{{ page.content | xml_escape }}{% endraw %}</code><br>
            XML 转码
          </p>
        </li>
        <li>
          标签
        </li>
      </ol>
    </article>
  </div>
  <div class="chapter-item">
    <a name="永久链接"></a>
    <h2 class="chapter-title">永久链接</h2>
    <article>

    </article>
  </div>
  <div class="chapter-item">
    <a name="分页"></a>
    <h2 class="chapter-title">分页</h2>
    <article>

    </article>
  </div>
  <div class="chapter-item">
    <a name="插件"></a>
    <h2 class="chapter-title">插件</h2>
    <article>

    </article>
  </div>
  <div class="chapter-item">
    <a name="主题"></a>
    <h2 class="chapter-title">主题</h2>
    <article>

    </article>
  </div>
  <div class="chapter-item">
    <a name="部署"></a>
    <h2 class="chapter-title">部署</h2>
    <article>

    </article>
  </div>
</div>
<hr>
<div class="blog-foot">
  <h3>参考资料</h3>
  <p class="link-item">
    <a name="ref_1">1、</a>
    <a href="https://github.com/jekyll/jekyll-sass-converter/tree/master/example" target="_blank">Jekyll Sass Converter Example</a>
  </p>
</div>
